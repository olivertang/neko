'use client'
'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var _tslib = require('../../../_virtual/_tslib.cjs');
var messageTransport = require('@dynamic-labs/message-transport');

const setupFetchHandler = (core) => {
    const fetchRequestChannel = messageTransport.createRequestChannel(core.messageTransport);
    fetchRequestChannel.handle('fetch', (input, init) => _tslib.__awaiter(void 0, void 0, void 0, function* () {
        const response = yield fetch(input, init);
        const responseBody = yield response.text();
        return {
            body: responseBody,
            // eslint-disable-next-line @typescript-eslint/no-explicit-any
            headers: Object.fromEntries(response.headers.entries()),
            status: response.status,
            statusText: response.statusText,
        };
    }));
};

exports.setupFetchHandler = setupFetchHandler;
