'use client'
import { __awaiter } from '../../../_virtual/_tslib.js';
import { createRequestChannel } from '@dynamic-labs/message-transport';

const setupFetchHandler = (core) => {
    const fetchRequestChannel = createRequestChannel(core.messageTransport);
    fetchRequestChannel.handle('fetch', (input, init) => __awaiter(void 0, void 0, void 0, function* () {
        const response = yield fetch(input, init);
        const responseBody = yield response.text();
        return {
            body: responseBody,
            // eslint-disable-next-line @typescript-eslint/no-explicit-any
            headers: Object.fromEntries(response.headers.entries()),
            status: response.status,
            statusText: response.statusText,
        };
    }));
};

export { setupFetchHandler };
